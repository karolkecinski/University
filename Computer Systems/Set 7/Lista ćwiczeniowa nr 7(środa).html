<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Lista ćwiczeniowa nr 7(środa) - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @charset "UTF-8";@import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;padding:0 15px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-published-note{color:#337ab7}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true" style="position: relative;"><h1 id="Lista-ćwiczeniowa-nr-7środa"><a class="anchor hidden-xs" href="#Lista-ćwiczeniowa-nr-7środa" title="Lista-ćwiczeniowa-nr-7środa"><span class="octicon octicon-link"></span></a>Lista ćwiczeniowa nr 7(środa)</h1><div class="alert alert-info">
<p>grupa PWit, środa 8-10</p>
</div><div class="alert alert-success">
<p><a href="https://meet.google.com/muu-ahkr-aak?authuser=1" target="_blank" rel="noopener">Link do audio/wideo-konferencji</a></p>
</div><h2 id="Deklaracje"><a class="anchor hidden-xs" href="#Deklaracje" title="Deklaracje"><span class="octicon octicon-link"></span></a>Deklaracje</h2><div class="alert alert-info">
<p>Studenci wypełniają poniższą tabelkę przed rozpoczęciem zajęć. Student ma obowiązek zapoznać się&nbsp;wcześniej ze składnią&nbsp;języka Markdown!</p>
</div><p>Gotowość rozwiązania zadania należy wyrazić poprzez postawienie X w odpowiedniej kolumnie!</p><table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody>
<tr>
<td>Maksymilian DeBeściak</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>Paweł	Bajgrowicz</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Przemysław Czerwiński</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Antoni	Dąbrowski</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Alicja	Danilczuk</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
<td>x</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>Agnieszka	Jonak</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Agata Kasprzak</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Karol	Kęciński</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Błażej	Korasiak</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Józef	Kowalewicz</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Jakub	Mendyk</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Barbara	Piasecka</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Damian	Ratajski</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Aleksandra Stępniewska</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Karol	Stuła</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Daniel	Wiczołek</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Patryk	Wilusz</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Mateusz	Zając</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table><h2 id="Rozwiązania-30-minut"><a class="anchor hidden-xs" href="#Rozwiązania-30-minut" title="Rozwiązania-30-minut"><span class="octicon octicon-link"></span></a>Rozwiązania (30 minut)</h2><div class="alert alert-info">
<p>Na początku zajęć prowadzący przypisuje studentów do zadań. W ciągu 30 minut student ma obowiązek uzupełnić rozwiązanie zadania. Jeśli zadanie wymaga posłużenia się&nbsp;diagramem, to można wkleić jego zdjęcie.  Prowadzący może zlecić przygotowanie rozwiązania danego zadania więcej niż jednej osobie.</p>
</div><div class="alert alert-warning">
<p>Zamieszczanie zdjęć gotowych rozwiązań jest niedozwolone chyba, że prowadzący na to pozwoli.</p>
</div><div class="alert alert-danger">
<p>Udostępnianie gotowych rozwiązań studentom z innych grup ćwiczeniowych jest niedozwolone!</p>
</div><h3 id="Zadanie-1-3pkty"><a class="anchor hidden-xs" href="#Zadanie-1-3pkty" title="Zadanie-1-3pkty"><span class="octicon octicon-link"></span></a>Zadanie 1 (3pkty)</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Mateusz Zając.</p>
</blockquote><p>Na podstawie rozdziału §7.12 podręcznika \Quote{Computer Systems: A<br>
Programmer’s Perspective} opisz proces <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-24-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>leniwego wi&amp;#x105;zania</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-6" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-7" class="mjx-mrow"><span id="MJXc-Node-8" class="mjx-texatom"><span id="MJXc-Node-9" class="mjx-mrow"><span id="MJXc-Node-10" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">leniwego wi</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ą</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">zania</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">leniwego wiązania</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-24">\textbf{leniwego wiązania}</script></span><br>
\English{lazy binding} symboli i odpowiedz na następujące pytania:</p><ul>
<li>Czym charakteryzuje się <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-25-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>kod relokowalny</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-11" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-12" class="mjx-mrow"><span id="MJXc-Node-13" class="mjx-texatom"><span id="MJXc-Node-14" class="mjx-mrow"><span id="MJXc-Node-15" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">kod relokowalny</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">kod relokowalny</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-25">\textbf{kod relokowalny}</script></span> \English{Position Independent Code}?</li>
<li>Do czego służą sekcje <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-26-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.plt</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-16" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-17" class="mjx-mrow"><span id="MJXc-Node-18" class="mjx-texatom"><span id="MJXc-Node-19" class="mjx-mrow"><span id="MJXc-Node-20" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.501em;">.plt</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.plt</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-26">\texttt{.plt}</script></span> i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-27-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.got</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-21" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-22" class="mjx-mrow"><span id="MJXc-Node-23" class="mjx-texatom"><span id="MJXc-Node-24" class="mjx-mrow"><span id="MJXc-Node-25" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.335em; padding-bottom: 0.501em;">.got</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.got</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-27">\texttt{.got}</script></span> – jakie dane są tam przechowywane?</li>
<li>Czemu sekcja <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-28-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.got</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-26" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-27" class="mjx-mrow"><span id="MJXc-Node-28" class="mjx-texatom"><span id="MJXc-Node-29" class="mjx-mrow"><span id="MJXc-Node-30" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.335em; padding-bottom: 0.501em;">.got</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.got</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-28">\texttt{.got}</script></span> jest modyfikowalna, a sekcje kodu i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-29-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.plt</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-31" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-32" class="mjx-mrow"><span id="MJXc-Node-33" class="mjx-texatom"><span id="MJXc-Node-34" class="mjx-mrow"><span id="MJXc-Node-35" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.501em;">.plt</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.plt</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-29">\texttt{.plt}</script></span> są tylko do odczytu?</li>
<li>Co znajduje się w sekcji <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-30-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.dynamic</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-36" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-37" class="mjx-mrow"><span id="MJXc-Node-38" class="mjx-texatom"><span id="MJXc-Node-39" class="mjx-mrow"><span id="MJXc-Node-40" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.501em;">.dynamic</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.dynamic</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-30">\texttt{.dynamic}</script></span>?</li>
</ul><p>Zaprezentuj leniwe wiązanie na podstawie programu:</p><pre><code class="clike hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-comment">/* lazy.c */</span>    
<span class="hljs-meta">#include &lt;stdio.h&gt;</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-keyword">void</span></span>) </span>{
  puts(<span class="hljs-string">"first time"</span>);
  puts(<span class="hljs-string">"second time"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></div></code></pre><p>skompilowanego poleceniem <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-31-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>gcc&amp;#xA0;-Os&amp;#xA0;-Wall&amp;#xA0;-ggdb&amp;#xA0;-o&amp;#xA0;lazy&amp;#xA0;lazy.c</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-41" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-42" class="mjx-mrow"><span id="MJXc-Node-43" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.39em; padding-bottom: 0.279em;"><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">gcc&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">-Os&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">-Wall&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">-ggdb&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">-o&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">lazy&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em;">lazy.c</span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">gcc&nbsp;-Os&nbsp;-Wall&nbsp;-ggdb&nbsp;-o&nbsp;lazy&nbsp;lazy.c</mtext></math></span></span><script type="math/tex" id="MathJax-Element-31">\verb@gcc -Os -Wall -ggdb -o lazy lazy.c@</script></span>. Uruchom go pod kontrolą&nbsp;debuggera \textsc{GDB}, ustaw punkty wstrzymań \English{breakpoint} na linię&nbsp;4 i 5. Po czym wykonując krokowo program (\texttt{stepi}) pokaż, że~gdy procesor skacze do adresu procedury <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-32-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>puts</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-44" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-45" class="mjx-mrow"><span id="MJXc-Node-46" class="mjx-texatom"><span id="MJXc-Node-47" class="mjx-mrow"><span id="MJXc-Node-48" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.335em; padding-bottom: 0.501em;">puts</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">puts</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-32">\texttt{puts}</script></span> zapisanego w <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-33-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>.got</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-49" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-50" class="mjx-mrow"><span id="MJXc-Node-51" class="mjx-texatom"><span id="MJXc-Node-52" class="mjx-mrow"><span id="MJXc-Node-53" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.335em; padding-bottom: 0.501em;">.got</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">.got</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-33">\texttt{.got}</script></span> – za pierwszym wywołaniem jest tam przechowywany inny adres niż za drugim.</p><p>Wskazówka: Wykorzystaj rysunek 7.19. Dobrze jest zainstalować sobie nakładkę na debugger \Link{<a href="https://github.com/cyrus-and/gdb-dashboard" target="_blank" rel="noopener">https://github.com/cyrus-and/gdb-dashboard</a>}{GDB dashboard} lub GDB TUI.</p><p><strong>Rozwiązanie:</strong></p><ul>
<li><strong>Leniwe wiązanie</strong> jest to sposób na oszczędzenie procesorowi instrukcji, które musi wykonać w przypadku wywołania procedury. Adres nie jest wiązany z samą procedurą dopóki nie będziemy próbować się do niej odwołać. W momencie wołania wykonujemy co prawda tę samą pracę co bez „leniwego wiązania”, ale każde kolejne wołanie tej procedury będzie już kosztowało tylko jedną<br>
instrukcję plus odwołane do pamięci.</li>
</ul><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> W “normalnym” (statycznym) wywołaniu funkcji mamy jedną insrukcję skoku pod adres początku funkcji. <s>W przypadku leniwego wiązania mamy dodatkowo  dwie lub trzy instrukcje skoku. Trzy za pierwszym razem, dwie za każdym kolejnym (zobacz jak współdziałają .got i .plt)</s>.    Ile będzie instrukcji skoku za pierwszym i za każdym kolejnym razem. A ile dodatowych odniesień do pamięći?</p>
</blockquote><p><strong>Tablica GOT</strong><br>
<img src="https://i.imgur.com/OcJRULT.png" alt=""></p><p><strong>Tablica PLT</strong><br>
<img src="https://i.imgur.com/VWLXAaj.png" alt=""></p><p>Dla uproszczenia załóżmy, że omawiana procedura jest pod indeksem 3 w GOT oraz pod indeksem 1 w PLT (jako printf).<br>
Pomijamy indeks 0 w PLT oraz 0, 1 i 2 indeks w GOT, ponieważ są one zarezerwowane.</p><p><strong>Pierwszy raz:</strong> Przeskakujemy to PLT na indeks[1]. Pierwszą instrukcją jest skok do GOT[3], więc skaczemy. W GOT[3] jest adres, do którego musimy skoczyć w PLT, aby uzyskać adres procedury. Skaczemy więc do odpowiedniego wiersza w PLT[1]. Ta instrukcja wkłada nam na stos adres procedury. Idziemy dalej, kolejny wiersz w PLT[1] to skok do PLT[0]. Po skoku do PLT[0] mamy instrukcję wepchnięcia na stos adresu GOT[1]. Nadpisujemy wartość w GOT[3], aby miała już właściwy adres procedury. Na końcu wywołujemy już właściwą procedurę z adresu, który uzyskaliśmy.</p><p>PLT + GOT + PLT = 3 skoki (nie licząc wywołania funkcji)</p><p><strong>Kolejny raz:</strong> Procedura jest wołana przez program. Jest skok do PLT[1] jak poprzednio, ale teraz po skoku do GOT mamy już w GOT[3] wywołanie właściwej procedury<br>
(bo mamy sprowadzony już odpowiedni adres).</p><p>PLT + GOT = 2 skoki (nie licząc wywołania funkcji)</p><p>~~</p><ul>
<li>
<p><strong>Kod relokowalny (PIC)</strong> jest to kod, którego adresy pamięci są niezależne od ułożenia innych programów/bibliotek/kodów w maszynie. Wszystkie potrzebne adresy w takim pliku są wyliczane na podstawie przesunięć względem odpowiednich sekcji w tym samym pliku *.o. Dopiero potem linker wylicza bezwzględne adresy, pod którymi zostaną umieszczone odpowiednie symbole w pamięci maszyny.</p>
</li>
<li>
<p><strong>.plt</strong> – Jest to sekcja „procedure linkage table” i przechowuje w sobie informacje o zewnętrznych procedurach i dostępie do nich. Każda zawołana procedura ma wpis w takiej sekcji. Dla danej procedury zawiera <a href="http://m.in" target="_blank" rel="noopener">m.in</a>. informacje gdzie jej adres znajduje się w GOT oraz pomaga przy realizacji leniwego wiązania. Dopiero w trakcie uruchomienia dynamiczny linker znajduje odpowiednie adresy w zewnętrznych plikach.</p>
</li>
<li>
<p><strong>.got</strong> – Jest to sekcja „global offset table” i przechowuje przesunięcia dla odpowiednich symboli względem innych sekcji programu *.o. Symbole są umieszczane w pamięci za kodem programu i ich pozycja nie zmienia się względem tego kodu. Dlatego też możemy obliczyć ich względną pozycję i umieścić ją w tabeli.</p>
</li>
<li>
<p><strong>Sekcja .got</strong> jest modyfikowalna, ponieważ maszyna zmienia ją według tablicy .plt kiedy zawołamy procedurę po raz pierwszy. Wpisuje tam odpowiednie adresy procedur, które w kolejnych wywołaniach posłużą szybszej obsłudze. Z uwagi na to, że .got jest w sekcji .data, a .plt w sekcji .text, tej drugiej sekcji nie wolno nam modyfikować, tak samo jak nie możemy modyfikować samego kodu.</p>
</li>
<li>
<p><strong>W sekcji .dynamic</strong> znajdują się informacje dla linkera. Ponieważ linker wykonuje dużo różnych rzeczy oprócz relokacji, sekcja .dynamic jest taką „ściągą”, która zawiera informacje o potrzebnych procedurach, bibliotekach i miejscu ich położenia. Po lewej stronie jest wartość, która identyfikuje co to jest, po prawej jej typ.</p>
</li>
<li>
<p><strong>Zmiana adresów:</strong><br>
<img src="https://i.imgur.com/BEO2nSm.png" alt="Widoczna zmiana adresów symbolu &quot;puts&quot;"><br>
Widoczna zmiana adresów symbolu “puts”.</p>
</li>
</ul><h3 id="Zadanie-2"><a class="anchor hidden-xs" href="#Zadanie-2" title="Zadanie-2"><span class="octicon octicon-link"></span></a>Zadanie 2</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Aleksandra Stępniewska.</p>
</blockquote><p>Rozważmy program składający się z dwóch plików źródłowych:</p><pre><code class="clike hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-comment">/* str-a.c */</span>
    <span class="hljs-meta">#include &lt;stdio.h&gt;</span>

    <span class="hljs-keyword">char</span> *somestr(<span class="hljs-keyword">void</span>);

    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-keyword">void</span></span>) </span>{
      <span class="hljs-keyword">char</span> *s = somestr();
      s[<span class="hljs-number">5</span>] = <span class="hljs-string">'\0'</span>;
      puts(s);
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
</div></div></code></pre><pre><code class="clike hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span></div><div class="code">  <span class="hljs-comment">/* str-b.c */</span>
    <span class="hljs-keyword">char</span> *somestr(<span class="hljs-keyword">void</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, world!"</span>;
    }
</div></div></code></pre><p>Po uruchomieniu program kończy się z błędem dostępu do pamięci. Dlaczego?<br>
Gdzie została umieszczona stała znakowa <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-528-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>&amp;quot;Hello, world!&amp;quot;</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1822" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1823" class="mjx-mrow"><span id="MJXc-Node-1824" class="mjx-texatom"><span id="MJXc-Node-1825" class="mjx-mrow"><span id="MJXc-Node-1826" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.445em; padding-bottom: 0.169em;"><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">"Hello, </span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em;">world!"</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">"Hello, world!"</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-528">\texttt{"Hello, world!"}</script></span>? Popraw ten<br>
program tak, by się poprawnie zakończył. Gdzie został umieszczony ciąg znaków<br>
po poprawce? Nie wolno modyfikować sygnatury procedury $\texttt{somestr}$ i<br>
pliku <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-529-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;monospace&quot;>str-a.c</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1827" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1828" class="mjx-mrow"><span id="MJXc-Node-1829" class="mjx-texatom"><span id="MJXc-Node-1830" class="mjx-mrow"><span id="MJXc-Node-1831" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.335em; padding-bottom: 0.279em;">str-a.c</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">str-a.c</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-529">\texttt{str-a.c}</script></span>, ani~korzystać z~dodatkowych procedur.</p><p>Rozwiązanie:</p><p><img src="https://i.imgur.com/vlvmtNS.png" alt=""></p><p>Możemy zauważyć, że w pliku ‘str-b.c’ napisu “Hello, World” nie przypisujemy do żadnej zmiennej, a jedynie zwracamy. Spowoduje to, że zostanie on przypisany do sekcji “read only data”. Program konczy się błędem dostępu do pamięci, ponieważ w linii 8 ‘str-a.c’ chcemy modyfikowac ten napis.</p><p>Aby program działał poprawnie wystarczy stworzyć zmienna pomocnicza, zapisać w niej nasz napis, a nastepnie zwrocić nie sam napis, a zmienna.</p><pre><code class="clike hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span></div><div class="code"> * <span class="hljs-comment">/* str-b.c */</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> pom[] = <span class="hljs-string">"Hello, world!"</span>;
    <span class="hljs-keyword">char</span> *somestr(<span class="hljs-keyword">void</span>) {
      <span class="hljs-keyword">return</span> pom;
    }
</div></div></code></pre><p>Przed zmianami nasz napis znajdowal się w sekcji .rodata,<br>
<img src="https://i.imgur.com/7nYGa8W.png" alt=""><br>
natomiast po w jest on już w sekcji .data (dlatego próba jego edycji nie powoduje błędu)<br>
<img src="https://i.imgur.com/vOAKl8W.png" alt=""></p><h3 id="Zadanie-32pkty"><a class="anchor hidden-xs" href="#Zadanie-32pkty" title="Zadanie-32pkty"><span class="octicon octicon-link"></span></a>Zadanie 3(2pkty)</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Jakub Mendyk.</p>
</blockquote><p>Korzystając z <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-535-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>dyrektyw asemblera</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1849" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1850" class="mjx-mrow"><span id="MJXc-Node-1851" class="mjx-texatom"><span id="MJXc-Node-1852" class="mjx-mrow"><span id="MJXc-Node-1853" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">dyrektyw asemblera</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">dyrektyw asemblera</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-535">\textbf{dyrektyw asemblera}</script></span> opisanych w  \Link{<a href="https://sourceware.org/binutils/docs-2.26/as/Pseudo-Ops.html" target="_blank" rel="noopener">https://sourceware.org/binutils/docs-2.26/as/Pseudo-Ops.html</a>}{GNU as: Assembler Directives} stwórz plik źródłowy (z rozszerzeniem <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-536-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>.s</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1854" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1855" class="mjx-mrow"><span id="MJXc-Node-1856" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.224em; padding-bottom: 0.279em;">.s</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">.s</mtext></math></span></span><script type="math/tex" id="MathJax-Element-536">\verb@.s@</script></span>) w którym</p><ul>
<li>zdefiniujesz globalną funkcję <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-537-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>foobar</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1857" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1858" class="mjx-mrow"><span id="MJXc-Node-1859" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.279em;">foobar</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">foobar</mtext></math></span></span><script type="math/tex" id="MathJax-Element-537">\verb@foobar@</script></span>,</li>
<li>zdefiniujesz lokalną strukturę podaną niżej:</li>
</ul><pre><code class="clike hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> {
  <span class="hljs-keyword">char</span> a[<span class="hljs-number">3</span>]; <span class="hljs-keyword">int</span> b; <span class="hljs-keyword">long</span> c; <span class="hljs-keyword">float</span> pi;
} baz = { <span class="hljs-string">"abc"</span>, <span class="hljs-number">42</span>, <span class="hljs-number">-3</span>, <span class="hljs-number">1.4142</span> };
</div></div></code></pre><ul>
<li>zarezerwujesz miejsce dla tablicy <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-538-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>long&amp;#xA0;array[100]</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1860" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1861" class="mjx-mrow"><span id="MJXc-Node-1862" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.279em;"><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">long&nbsp;</span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em;">array[100]</span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">long&nbsp;array[100]</mtext></math></span></span><script type="math/tex" id="MathJax-Element-538">\verb@long array[100]@</script></span>?</li>
</ul><p>Pamiętaj, że dla każdego zdefiniowanego symbolu należy uzupełnić odpowiednio tablicę <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-539-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>.symtab</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1863" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1864" class="mjx-mrow"><span id="MJXc-Node-1865" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.501em;">.symtab</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">.symtab</mtext></math></span></span><script type="math/tex" id="MathJax-Element-539">\verb@.symtab@</script></span> o typ symbolu i~rozmiar danych, do których odnosi się  symbol. Z pliku źródłowego stwórz plik relokowalny. Analizując go przekonaj się o poprawności rozwiązania.</p><p>Wskazówka: Ktoś, a raczej coś może stworzyć rozwiązanie za Ciebie, a Ty musisz je tylko zrozumieć.</p><h4 id="Rozwiązanie0"><a class="anchor hidden-xs" href="#Rozwiązanie0" title="Rozwiązanie0"><span class="octicon octicon-link"></span></a>Rozwiązanie</h4><p>Skorzystajmy ze wskazówki. Napiszemy program w języku C, w którym zdefiniujemy wartości z treści zadania:</p><pre><code class="clike hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foobar</span>(<span class="hljs-params"></span>) </span>{ }

<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> {
  <span class="hljs-keyword">char</span> a[<span class="hljs-number">3</span>]; <span class="hljs-keyword">int</span> b; <span class="hljs-keyword">long</span> c; <span class="hljs-keyword">float</span> pi;
} baz = { <span class="hljs-string">"abc"</span>, <span class="hljs-number">42</span>, <span class="hljs-number">-3</span>, <span class="hljs-number">1.4142</span> };

<span class="hljs-keyword">long</span> array[<span class="hljs-number">100</span>];
</code></pre><p>Plik w assemblerze generujemy poleceniem <code>gcc -S plik.c</code>. Jego zawartość wygląda następująco:</p><pre><code>	.file	"l7z3.c"
	.text
	.globl	foobar
	.type	foobar, @function
foobar:
.LFB0:                          # CFA - Canonical Frame Address
	.cfi_startproc              # początek procedury 
	pushq	%rbp
	.cfi_def_cfa_offset 16      # offset względem rejestru wierzchu stosu
	.cfi_offset 6, -16          # 6 = rbp
	movq	%rsp, %rbp
	.cfi_def_cfa_register 6
	nop
	popq	%rbp
	.cfi_def_cfa 7, 8           # 7 = rsp
	ret
	.cfi_endproc
.LFE0:
	.size	foobar, .-foobar
	.section	.rodata
	.align 16
	.type	baz, @object
	.size	baz, 24
baz:
	.ascii	"abc"
	.zero	1
	.long	42
	.quad	-3
	.long	1068827777
	.zero	4
	.comm	array,800,32
	.ident	"GCC: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0"
	.section	.note.GNU-stack,"",@progbits

</code></pre><p>Przyjrzyjmy się kolejnym fragmentom:</p><p>Na początek informacja pomocnicza z jakiego pliku powstał plik assemblerowy:</p><pre><code>	.file	"l7z3.c"
</code></pre><p>Następnie zaczyna się część odpowiedzialna za funkcję <code>foobar</code>:</p><pre><code>	.text
	.globl	foobar
	.type	foobar, @function
foobar:                             # CFI - Call Frame Information
.LFB0:                              # CFA - Canonical Frame Address
	.cfi_startproc                  # początek procedury 
	pushq	%rbp
	.cfi_def_cfa_offset 16          # offset wzgl. rejestru wierzchu stosu
	.cfi_offset 6, -16              # 6 = rbp
	movq	%rsp, %rbp
	.cfi_def_cfa_register 6
	nop
	popq	%rbp
	.cfi_def_cfa 7, 8               # 7 = rsp
	ret
	.cfi_endproc
.LFE0:
	.size	foobar, .-foobar
</code></pre><p>Dyrektywa “.text” wskazuje, że dalsze dane mają zostać umieszczone w sekcji “text” pliku wykonywalnego ELF. Następnie informujemy, że symbol <code>foobar</code> ma być global, tj. dostępny dla konsolidatorów oraz że <code>foobar</code> jest funkcją.</p><p>Dalej pojawia się definicja funkcji z dodatkowymi adnotacjami w formie dyrektyw. Wskazują początek i koniec obszaru związanego z ramką wywołania tejże funkcji (<code>.cfi_startproc</code>, <code>.cfi_endproc</code>). Dyrektywa <code>.cfi_def_cfa_offset 16</code> informuje, że ramka stosu jest przesunięta 16 bajtów. Istotnie:</p><table>
<thead>
<tr>
<th></th>
<th>Zawartość</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Część z danymi wywołującego</td>
</tr>
<tr>
<td>A+8</td>
<td>adres powrotny</td>
</tr>
<tr>
<td>A+16</td>
<td>dane foobar</td>
</tr>
</tbody>
</table><p>Dalsze dyrektywy przekształcają informaje o wierzchu stosu. Dyrektywa <code>.cfi_offset 6, -16</code> informuje, że adres wierzchu stosu wywołującego zostaje zapisany w 6-tym rejestrze (RBP, numery można znaleźć np. w dokumentacji ABI) i ma być o 16 mniejszy niż aktualny adres. Dalej <code>.cfi_def_cfa_register 6</code> zmienia rejestr który odpowiada za wierzch stosu. Finalnie <code>.cfi_def_cfa 7, 8</code> przywraca RSP+8 jako rejestr adresu stosu. Te informacje nie są potrzebne do wygenerowania właściwego pliku wykonywalnego ale są pomocne dla debuggera.</p><p>Na koniec tego fragmentu pojawia się dyrektywa <code>.size	foobar, .-foobar</code>, która określa rozmiar wartości symbolu <code>foobar</code>, rozmiar nie jest podany jawnie i zostanie obliczony w dalszej części procesu generowania pliku wykonywalnego.</p><p>Następny fragment:</p><pre><code>	.section	.rodata
	.align 16
	.type	baz, @object
	.size	baz, 24
baz:
	.ascii	"abc"
	.zero	1
	.long	42
	.quad	-3
	.long	1068827777
	.zero	4
	.comm	array,800,32
</code></pre><p>Teraz informacje umieszczamy w sekcji <code>.rodata</code>, prosimy by adresy były podzielne przez 16 i defniujemy symbol <code>baz</code> będący obiektem (w znaczeniu ELF) o rozmiarze 24. Zawiera on ciąg znaków zakończony explicite zerem (dyrektywa <code>.zero 1</code>), które mają odpowiednio 4, 8 i 4 bajty. Następnie znowu wyrównujemy po czym definiujemy wartość do sekcji COMMON, związaną z symbolem <code>array</code>, która ma mieć 800 bajtów (100 longów - zgadza się) i mieć adres podzielny przez 32.</p><p>Generujemy plik relokowalny poleceniem <code>as -o l7z3.o l7z3.s</code> i sprawdzamy jego zawartość:</p><pre><code>SYMBOL TABLE:
0000000000000000 l    df *ABS*  0000000000000000 l7z3.c
0000000000000000 l    d  .text  0000000000000000 .text
0000000000000000 l    d  .data  0000000000000000 .data
0000000000000000 l    d  .bss   0000000000000000 .bss
0000000000000000 l    d  .rodata        0000000000000000 .rodata
0000000000000000 l     O .rodata        0000000000000018 baz
0000000000000000 l    d  .note.GNU-stack        0000000000000000 .note.GNU-stack
0000000000000000 l    d  .eh_frame      0000000000000000 .eh_frame
0000000000000000 l    d  .comment       0000000000000000 .comment
0000000000000000 g     F .text  0000000000000007 foobar
0000000000000320       O *COM*  0000000000000020 array
</code></pre><p>Wszystkie zdefiniowane przez nas symbole pojawią się we właściwych sekcjach i mają dobre rozmiary.</p><h3 id="Zadanie-4"><a class="anchor hidden-xs" href="#Zadanie-4" title="Zadanie-4"><span class="octicon octicon-link"></span></a>Zadanie 4</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Patryk Wilusz.</p>
</blockquote><p>Jakie konstrukcje językowe w C są blokadami optymalizacji (ang. \emph{optimization blockers})? Porównaj funkcje <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-552-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>combine1</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1914" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1915" class="mjx-mrow"><span id="MJXc-Node-1916" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.279em;">combine1</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">combine1</mtext></math></span></span><script type="math/tex" id="MathJax-Element-552">\verb@combine1@</script></span> i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-553-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>combine4</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1917" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1918" class="mjx-mrow"><span id="MJXc-Node-1919" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.445em; padding-bottom: 0.279em;">combine4</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">combine4</mtext></math></span></span><script type="math/tex" id="MathJax-Element-553">\verb@combine4@</script></span> ze slajdów i wyjaśnij, dlaczego wydajniejsza wersja musiała zostać stworzona ręcznie.</p><p>W C blokadami optymalizacji są:</p><ul>
<li>Procedure calls</li>
<li>Memory aliasing</li>
</ul><pre><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="token keyword">void</span> <span class="token function">combine1</span><span class="token punctuation">(</span>vec_ptr v<span class="token punctuation">,</span> data_t <span class="token operator">*</span>dest<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">long</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token operator">*</span>dest <span class="token operator">=</span> IDENT<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">vec_length</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data_t val<span class="token punctuation">;</span>
    <span class="token function">get_vec_element</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">*</span>dest <span class="token operator">=</span> <span class="token operator">*</span>dest OP val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</div></div></code></pre><pre><code class="cpp hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="token keyword">void</span> <span class="token function">combine4</span><span class="token punctuation">(</span>vec_ptr v<span class="token punctuation">,</span> data_t <span class="token operator">*</span>dest<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">long</span> i<span class="token punctuation">;</span>
    <span class="token keyword">long</span> length <span class="token operator">=</span> <span class="token function">vec_length</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// liczymy tylko raz długość</span>
    data_t <span class="token operator">*</span>d <span class="token operator">=</span> <span class="token function">get_vec_start</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// zapisujemy wskaźnik na początek wektora</span>
    data_t t <span class="token operator">=</span> IDENT<span class="token punctuation">;</span>            <span class="token comment">// zmienna tymczasowa</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
        t <span class="token operator">=</span> t OP d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>           <span class="token comment">// akumulujemy w zmiennej tymczasowej</span>
    <span class="token operator">*</span>dest <span class="token operator">=</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</div></div></code></pre><p>Optymalizacje:</p><ul>
<li>długość v jest liczona tylko raz</li>
<li>rezygnujemy ze sprawdzania czy próbujemy odczytać nieistniejący index w wektorze</li>
<li>używamy zmiennej tymczasowej</li>
</ul><p>Kompilator może podjąć się optymalizacji tylko i wyłącznie jeśli ma pewność, że optymalizacja nie będzie miała żadnch negatywnych skutków. Kompilator nie jest w stanie wykonać takich operacji, które mogłyby zmienić semantykę programu.</p><h3 id="Zadanie-5"><a class="anchor hidden-xs" href="#Zadanie-5" title="Zadanie-5"><span class="octicon octicon-link"></span></a>Zadanie 5</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Przemysław Czerwiński.</p>
</blockquote><p>Na podstawie rozdziału §5.7 podręcznika \Quote{Computer<br>
Systems: A Programmer’s Perspective} i rysunku 5.11 wyjaśnij zasadę działania procesora o architekturze <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-548-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>superskalarnej</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1896" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1897" class="mjx-mrow"><span id="MJXc-Node-1898" class="mjx-texatom"><span id="MJXc-Node-1899" class="mjx-mrow"><span id="MJXc-Node-1900" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">superskalarnej</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">superskalarnej</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-548">\textbf{superskalarnej}</script></span>. Jak działa <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-549-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>spekulatywne</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1901" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1902" class="mjx-mrow"><span id="MJXc-Node-1903" class="mjx-texatom"><span id="MJXc-Node-1904" class="mjx-mrow"><span id="MJXc-Node-1905" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">spekulatywne</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">spekulatywne</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-549">\textbf{spekulatywne}</script></span> wykonywanie instrukcji? Co to znaczy, że poszczególne jednostki funkcjonalne procesora działają w sposób <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-550-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>potokowy</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1906" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1907" class="mjx-mrow"><span id="MJXc-Node-1908" class="mjx-texatom"><span id="MJXc-Node-1909" class="mjx-mrow"><span id="MJXc-Node-1910" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">potokowy</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">potokowy</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-550">\textbf{potokowy}</script></span>?</p><h4 id="Rozwiązanie"><a class="anchor hidden-xs" href="#Rozwiązanie" title="Rozwiązanie"><span class="octicon octicon-link"></span></a>Rozwiązanie</h4><p>Procesor o architekturze <strong>superskalarnej</strong> jest w stanie wykonywać wiele instrukcji w jednym cyklu zegara. Porządek operacji w kodzie binarnym niekoniecznie jest porządkiem, w jakim procesor wykona te operacje – oczywiście tak długo, jak nie ma to wpływu na działanie programu.</p><p>Procesor składa się z dwóch głównych części – instruction control unit (ICU) oraz execution unit (EU). ICU na bieżąco analizuje kod binarny i na jego podstawie tworzy harmonogram wykonywania instrukcji, który stopniowo przekazuje do EU, aby te instrukcje zostały faktycznie wykonane. ICU zasadniczo wyprzedza EU, jednak problem pojawia się, gdy ICU natrafi na warunkowe rozgałęzienie, bowiem skąd ICU ma wiedzieć, którą gałąź wybrać, skoro EU jeszcze nie obliczył potrzebnego wyniku? Właśnie w takich sytuacjach ICU <strong>spekuluje</strong>, którą gałąź wybrać i na podstawie tej spekulacji kontynuuje pracę. Oczywiście może się zdarzyć tak, że ta spekulacja będzie niepoprawna. Kiedy EU dojdzie już do tego fragmentu i okaże się, że powinna była zostać wybrana inna gałąź, EU informuje o tym ICU. Wówczas ICU cofa się do tego punktu i od tego momentu zaczyna tworzyć nowy harmonogram dla EU – tym razem dla drugiej gałęzi. Oczywiście spowalnia to pracę, bo w takich sytuacjach EU musi czekać na ICU.</p><p><strong>Potokowe</strong> działanie poszczególnych jednostek funkcjonalnych oznacza, że jeśli instrukcje składają się z kilku etapów i wyniki tych instrukcji nie zależą od siebie, to druga instrukcja nie musi czekać, aż cała pierwsza instrukcja się wykona.<br>
Na przykład w momencie gdy wykonywany jest drugi etap dla pierwszej instrukcji, jednocześnie może być wykonywany pierwszy etap dla drugiej instrukcji.</p><h3 id="Zadanie-6"><a class="anchor hidden-xs" href="#Zadanie-6" title="Zadanie-6"><span class="octicon octicon-link"></span></a>Zadanie 6</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Karol Kęciński.</p>
</blockquote><p>Rozpatrujemy procesor o charakterystyce podanej w tabeli 5.12 podręcznika \Quote{Computer Systems: A Programmer’s Perspective}. Zdefiniuj miarę wydajności CPE (ang. \emph{cycles per element/operation}), następnie wyjaśnij pojęcie granicy opóźnienia (ang. \emph{latency bound}) oraz granicy przepustowości (ang. \emph{throughput bound}) procesora. Skąd biorą się wartości w tabelce na stronie 560?</p><p><img src="https://i.imgur.com/FCSxQ5R.png" alt=""></p><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Powyższa podchodzi z poprzedniej wersji książki. Nas interesuje bieżąca.</p>
</blockquote><p>CPE (Cycles Per Operation) - miara wydajności dla programów operujących na wektorach albo listach - podaje, jak dużo cykli procesora było potrzebnych do wykonania programu operującego na liście.</p><p>Latency Bound (Granica opóźnienia) - osiągamy granicę opóźnienia gdy mamy serię operacji, które muszą być wykonywane po sobie, jedna po drugiej. (Wynik jednej jest potrzebny do wykonania drugiej) Ta granica może ograniczać wydajność programu, gdy zależnościdanych w kodzie ograniczają zdolność procesora do wykorzystywania równoległości obloiczeń na poziomie instrukcji.</p><p>Troughput Bound (Granica przepustowości) - jest to surowa moc obliczeniowa jednostek funkcjonalnych procesora, a zarazem ostateczna granica wydajności dla programu.</p><p><img src="https://i.imgur.com/9tIm5OQ.png" alt=""></p><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Powyższa tabelka też jest z poprzedniej edycji książki.</p>
</blockquote><p>Latency Bound (Granica opóźnienia) podaje minimalną wartość cykli procesora dla dowolnej funkcji, która musi przeprowadzać operacje w ściśle określonej kolejności.</p><p>Troughput Bound (Granica przepustowośi) podaje ograniczenie w oparciu o maksymalne tempo , z jakim jednostki funkcjonalne mogą wytwarzać wynik.</p><h3 id="Zadanie-7"><a class="anchor hidden-xs" href="#Zadanie-7" title="Zadanie-7"><span class="octicon octicon-link"></span></a>Zadanie 7</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Daniel Wiczołek.</p>
</blockquote><p>Z czego wynika wysoka wydajność funkcji <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-551-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathvariant=&quot;monospace&quot;>combine6</mtext></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-1911" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1912" class="mjx-mrow"><span id="MJXc-Node-1913" class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.39em; padding-bottom: 0.279em;">combine6</span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathvariant="monospace">combine6</mtext></math></span></span><script type="math/tex" id="MathJax-Element-551">\verb@combine6@</script></span> (tabelka 5.21, str. 573)? Jak zoptymalizować ten kod by dojść do granicy przepustowości procesora?</p><h4 id="Rozwiązanie2"><a class="anchor hidden-xs" href="#Rozwiązanie2" title="Rozwiązanie2"><span class="octicon octicon-link"></span></a>Rozwiązanie</h4><pre><code class="cpp hljs"><span class="token number">1</span> <span class="token comment">/* 2 x 2 loop unrolling */</span>
<span class="token number">2</span> <span class="token keyword">void</span> <span class="token function">combine6</span><span class="token punctuation">(</span>vec_ptr v<span class="token punctuation">,</span> data_t <span class="token operator">*</span>dest<span class="token punctuation">)</span>
<span class="token number">3</span> <span class="token punctuation">{</span>
<span class="token number">4</span>     <span class="token keyword">long</span> i<span class="token punctuation">;</span>
<span class="token number">5</span>     <span class="token keyword">long</span> length <span class="token operator">=</span> <span class="token function">vec_length</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">6</span>     <span class="token keyword">long</span> limit <span class="token operator">=</span> length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token number">7</span>     data_t <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token function">get_vec_start</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">8</span>     data_t acc0 <span class="token operator">=</span> IDENT<span class="token punctuation">;</span>
<span class="token number">9</span>     data_t acc1 <span class="token operator">=</span> IDENT<span class="token punctuation">;</span>
<span class="token number">10</span>
<span class="token number">11</span> <span class="token comment">/* Combine 2 elements at a time */</span>
<span class="token number">12</span>     <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> limit<span class="token punctuation">;</span> i<span class="token operator">+</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">13</span>         acc0 <span class="token operator">=</span> acc0 OP data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">14</span>         acc1 <span class="token operator">=</span> acc1 OP data<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">15</span>     <span class="token punctuation">}</span>
<span class="token number">16</span>
<span class="token number">17</span> <span class="token comment">/* Finish any remaining elements */</span>
<span class="token number">18</span>     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token number">19</span>         acc0 <span class="token operator">=</span> acc0 OP data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token number">20</span>     <span class="token punctuation">}</span>
<span class="token number">21</span>     <span class="token operator">*</span>dest <span class="token operator">=</span> acc0 OP acc1<span class="token punctuation">;</span>
<span class="token number">22</span> <span class="token punctuation">}</span>
</code></pre><p>Rejestry są akumulatorami dla danej grupy elementów, operacje na danym akumulatorze są niezależne od pozostałych więc instrukcje w danej iteracji wykonują się równolegle (w ramach możliwości – liczba jednostek wykonujących operacje jest ograniczona) i są wykonywane w sposób potokowy (są pipelined).</p><p>Aby dojść do granicy przepustowości należy skorzystać z powyższech wniosków -<br>
wykorzystujemy obserwację, że niezależne operacje mogą być wykonywane równolegle i potokowo. Należy zwiększyć liczbę operacji na jedną iterację pamiętając jednak, że mamy ograniczoną liczbę akumulatorów (rejestrów), w książce jest pokazane, że unrolling rzędu 10x10 daje nam wydajność bardzo bliską tej granicy.</p><p>Generalnie: dla operacji mającej latency L i capacity C chcemy unrolling rzędu k &gt;= L*C</p><h3 id="Zadanie-8"><a class="anchor hidden-xs" href="#Zadanie-8" title="Zadanie-8"><span class="octicon octicon-link"></span></a>Zadanie 8</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Alicja Danilczuk.</p>
</blockquote><p>Rozważmy dysk o następujących parametrach:</p><ul>
<li>jeden talerz;</li>
<li>jedna głowica;</li>
<li>400 tysięcy ścieżek na powierzchnię;</li>
<li>2500 sektorów na~ścieżkę;</li>
<li>7200 obrotów na~minutę;</li>
<li>czas wyszukiwania: 1ms na przeskoczenie o 50 tysięcy ścieżek.</li>
</ul><p>Pytania:</p><ul>
<li>Jaki jest średni czas wyszukiwania?<br>
Czyli mamy gdzieś głowicę i chcemy ją przesunąć. Musimy więc policzyć wartość oczekiwaną.<br>
<img src="https://i.imgur.com/oJoip25.png" alt=""><br>
Średnia ze średnich (wypisanych poziomo i pionowo)  jest równa 2,96, czyli<br>
T<sub>seek</sub> = 2,96</li>
</ul><p><img src="https://i.imgur.com/PkcczAO.png" alt=""><br>
W poniższych pytaniach korzystamy ze wzorów ze slajdów.</p><ul>
<li>Jaki jest średni czas opóźnienia obrotowego?<br>
T<sub>latency</sub> = 1/2 * 1/RPMs * 60s/1min  = 1/2 * 1/7200 * 60 = 0,004s = 4ms</li>
<li>Jaki jest czas transferu sektora?<br>
T<sub>transfer</sub> = 1/RPM * 1/(#sectors/track) * 60secs/1 min = 1/72000 * 1/2500 * 60/1 = 0,003ms</li>
<li>Jaki jest całkowity średni czas obsługi żądania?<br>
Musimy znaleźć pożądaną ścieżkę (T<sub>seek</sub>), dojść do jej pierwszego bitu (T<sub>latency</sub>) i przeczytać bity w sektorze (T<sub>transfer</sub>).<br>
T<sub>seek</sub> + T<sub>latency</sub> + T<sub>transfer</sub> = 2,96 + 4 + 0,003 = ~7ms</li>
</ul><h3 id="Zadanie-9"><a class="anchor hidden-xs" href="#Zadanie-9" title="Zadanie-9"><span class="octicon octicon-link"></span></a>Zadanie 9</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Agnieszka Jonak.</p>
</blockquote><p>Rozważmy dysk o następujących parametrach: 360 obrotów na~minutę, 512 bajtów na~sektor, 96 sektorów na~ścieżkę, 110 ścieżek na~powierzchnię. Procesor czyta z~dysku całe sektory. Dysk sygnalizuje dostępność danych zgłaszając przerwanie na~każdy przeczytany bajt. Jaki procent czasu procesora będzie zużywała obsługa wejścia-wyjścia, jeśli wykonanie procedury przerwania zajmuje 2.5µs? Należy zignorować czas wyszukiwania ścieżki i sektora.</p><p>Do systemu dodajemy kontroler DMA. Przerwanie będzie generowane tylko raz po wczytaniu sektora do~pamięci. Jak zmieniła się zajętość procesora?</p><p>Wskazówka: W tym zadaniu procedura obsługi przerwania zajmuje się przetworzeniem przeczytanych danych i będzie wywołana za każdym razem, gdy zgłoszono przerwanie.</p><h4 id="Rozwiązanie21"><a class="anchor hidden-xs" href="#Rozwiązanie21" title="Rozwiązanie21"><span class="octicon octicon-link"></span></a>Rozwiązanie</h4><ul>
<li>
<p>czas transferu:<br>
1/96 sektor/ścieżka * 1/360 RPM = 1.736 ms</p>
</li>
<li>
<p>czas przerwań:<br>
512 bajt/sektor * 2.5µs = 1.28 ms</p>
</li>
<li>
<p>jaki procent będzie zużywała obsługa wejścia/wyjścia:<br>
czas przerwań / czas transferu * 100 = (1.28ms / 1.736ms) * 100 = 73.7%<br>
1.28ms / (1.736ms + 1.28ms) * 100 = 42.44%</p>
</li>
<li>
<p>dodanie kontrolera DMA, jak zmieniła się zajętość procesora:<br>
2,5µs / 1.736 ms * 100 = (0.0025 ms / 1.736ms) * 100 = 0.144%<br>
0.0025 ms / (1.736ms + 0.0025ms) * 100 = 0.143%</p>
</li>
</ul><blockquote>
<p><small><i class="fa fa-user"></i> Przemysław Czerwiński</small> Wydaje mi się, że licząc procent zajętości należy czas przerwań podzielić przez sumę czasu przerwań oraz transferu, a nie tylko przez czas transferu.<br>
<small><i class="fa fa-user"></i> Przemysław Czerwiński</small> Teraz powinno być ok.</p>
</blockquote><h3 id="Zadanie-10"><a class="anchor hidden-xs" href="#Zadanie-10" title="Zadanie-10"><span class="octicon octicon-link"></span></a>Zadanie 10</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small> Rozwiązuje p. Barbara Piasecka.</p>
</blockquote><p>W przeważającej większości systemów implementujących moduły DMA, procesor ma niższy priorytet dostępu do pamięci głównej niż moduły DMA. Dlaczego?</p><p>Wskazówka: Co się&nbsp;może stać, jeśli urządzenia nie mają gwarancji wykonywania transferów w regularnych odstępach czasu?</p><p>DMA - direct memory access; gwarancja wykonywania transferów do pamięci.<br>
Moduły DMA mają wyższy priorytet dostępu do pamięci ogólnej, ponieważ nie mają wystarczającej pamięci podręcznej, aby zapisywać dane.<br>
Przykład: karta sieciowa. Jeśli nie miałaby możliwości regularnego transferu danych, mogłyby one zostać utracone.</p><h2 id="Konsultacje-60-minut"><a class="anchor hidden-xs" href="#Konsultacje-60-minut" title="Konsultacje-60-minut"><span class="octicon octicon-link"></span></a>Konsultacje (60 minut)</h2><div class="alert alert-info">
<p>W trakcie konsultacji prowadzący udostępnia kartę przeglądarki z bieżącym dokumentem w wideokonferencji. Moderuje dyskusję według własnego uznania, na przykład:</p>
<ul>
<li>kieruje dodatkowe pytania do osób, które dostarczyły rozwiązania,</li>
<li>wymaga uzupełnienia rozwiązania przez autora lub wybraną osobę,</li>
<li>umożliwia studentom zadawanie pytań,</li>
<li>odpowiada na pytania w komentarzach.</li>
</ul>
</div></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#Lista-ćwiczeniowa-nr-7środa" title="Lista ćwiczeniowa nr 7(środa)">Lista ćwiczeniowa nr 7(środa)</a><ul class="nav">
<li><a href="#Deklaracje" title="Deklaracje">Deklaracje</a></li>
<li class=""><a href="#Rozwiązania-30-minut" title="Rozwiązania (30 minut)">Rozwiązania (30 minut)</a><ul class="nav">
<li><a href="#Zadanie-1-3pkty" title="Zadanie 1 (3pkty)">Zadanie 1 (3pkty)</a></li>
<li><a href="#Zadanie-2" title="Zadanie 2">Zadanie 2</a></li>
<li><a href="#Zadanie-32pkty" title="Zadanie 3(2pkty)">Zadanie 3(2pkty)</a></li>
<li><a href="#Zadanie-4" title="Zadanie 4">Zadanie 4</a></li>
<li><a href="#Zadanie-5" title="Zadanie 5">Zadanie 5</a></li>
<li class=""><a href="#Zadanie-6" title="Zadanie 6">Zadanie 6</a></li>
<li><a href="#Zadanie-7" title="Zadanie 7">Zadanie 7</a></li>
<li><a href="#Zadanie-8" title="Zadanie 8">Zadanie 8</a></li>
<li><a href="#Zadanie-9" title="Zadanie 9">Zadanie 9</a></li>
<li><a href="#Zadanie-10" title="Zadanie 10">Zadanie 10</a></li>
</ul>
</li>
<li><a href="#Konsultacje-60-minut" title="Konsultacje (60 minut)">Konsultacje (60 minut)</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class=""><a href="#Lista-ćwiczeniowa-nr-7środa" title="Lista ćwiczeniowa nr 7(środa)">Lista ćwiczeniowa nr 7(środa)</a><ul class="nav">
<li><a href="#Deklaracje" title="Deklaracje">Deklaracje</a></li>
<li class=""><a href="#Rozwiązania-30-minut" title="Rozwiązania (30 minut)">Rozwiązania (30 minut)</a><ul class="nav">
<li><a href="#Zadanie-1-3pkty" title="Zadanie 1 (3pkty)">Zadanie 1 (3pkty)</a></li>
<li><a href="#Zadanie-2" title="Zadanie 2">Zadanie 2</a></li>
<li><a href="#Zadanie-32pkty" title="Zadanie 3(2pkty)">Zadanie 3(2pkty)</a></li>
<li><a href="#Zadanie-4" title="Zadanie 4">Zadanie 4</a></li>
<li><a href="#Zadanie-5" title="Zadanie 5">Zadanie 5</a></li>
<li class=""><a href="#Zadanie-6" title="Zadanie 6">Zadanie 6</a></li>
<li><a href="#Zadanie-7" title="Zadanie 7">Zadanie 7</a></li>
<li><a href="#Zadanie-8" title="Zadanie 8">Zadanie 8</a></li>
<li><a href="#Zadanie-9" title="Zadanie 9">Zadanie 9</a></li>
<li><a href="#Zadanie-10" title="Zadanie 10">Zadanie 10</a></li>
</ul>
</li>
<li><a href="#Konsultacje-60-minut" title="Konsultacje (60 minut)">Konsultacje (60 minut)</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
