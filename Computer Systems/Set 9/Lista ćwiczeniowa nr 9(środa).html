<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Lista ćwiczeniowa nr 9(środa) - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @charset "UTF-8";@import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;padding:0 15px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc-label{opacity:.3;background-color:#ccc;border:none;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-published-note{color:#337ab7}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true" style="position: relative;"><h1 id="Lista-ćwiczeniowa-nr-9środa"><a class="anchor hidden-xs" href="#Lista-ćwiczeniowa-nr-9środa" title="Lista-ćwiczeniowa-nr-9środa"><span class="octicon octicon-link"></span></a>Lista ćwiczeniowa nr 9(środa)</h1><div class="alert alert-info">
<p>grupa PWit, środa 8-10</p>
</div><div class="alert alert-success">
<p><a href="https://meet.google.com/muu-ahkr-aak?authuser=1" target="_blank" rel="noopener">Link do audio/wideo-konferencji</a></p>
</div><h2 id="Deklaracje"><a class="anchor hidden-xs" href="#Deklaracje" title="Deklaracje"><span class="octicon octicon-link"></span></a>Deklaracje</h2><div class="alert alert-info">
<p>Studenci wypełniają poniższą tabelkę przed rozpoczęciem zajęć. Student ma obowiązek zapoznać się&nbsp;wcześniej ze składnią&nbsp;języka Markdown!</p>
</div><p>Gotowość rozwiązania zadania należy wyrazić poprzez postawienie X w odpowiedniej kolumnie!</p><table>
<thead>
<tr>
<th></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
</tr>
</thead>
<tbody>
<tr>
<td>Maksymilian DeBeściak</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Paweł	Bajgrowicz</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Przemysław Czerwiński</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Antoni	Dąbrowski</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Alicja	Danilczuk</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Agnieszka	Jonak</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Agata Kasprzak</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Karol	Kęciński</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Błażej	Korasiak</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Józef	Kowalewicz</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Jakub	Mendyk</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Barbara	Piasecka</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Damian	Ratajski</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Aleksandra Stępniewska</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Karol	Stuła</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Daniel	Wiczołek</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Patryk	Wilusz</td>
<td>X</td>
<td></td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Mateusz	Zając</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table><h2 id="Rozwiązania-30-minut"><a class="anchor hidden-xs" href="#Rozwiązania-30-minut" title="Rozwiązania-30-minut"><span class="octicon octicon-link"></span></a>Rozwiązania (30 minut)</h2><div class="alert alert-info">
<p>Na początku zajęć prowadzący przypisuje studentów do zadań. W ciągu 30 minut student ma obowiązek uzupełnić rozwiązanie zadania. Jeśli zadanie wymaga posłużenia się&nbsp;diagramem, to można wkleić jego zdjęcie.  Prowadzący może zlecić przygotowanie rozwiązania danego zadania więcej niż jednej osobie.</p>
</div><div class="alert alert-warning">
<p>Zamieszczanie zdjęć gotowych rozwiązań jest niedozwolone chyba, że prowadzący na to pozwoli.</p>
</div><div class="alert alert-danger">
<p>Udostępnianie gotowych rozwiązań studentom z innych grup ćwiczeniowych jest niedozwolone!</p>
</div><h3 id="Zadanie-1"><a class="anchor hidden-xs" href="#Zadanie-1" title="Zadanie-1"><span class="octicon octicon-link"></span></a>Zadanie 1</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Patryk Wilusz</p>
</blockquote><p>Opisz różnice między <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-19-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>przerwaniem sprz&amp;#x119;towym</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-91" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-92" class="mjx-mrow"><span id="MJXc-Node-93" class="mjx-texatom"><span id="MJXc-Node-94" class="mjx-mrow"><span id="MJXc-Node-95" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">przerwaniem sprz</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ę</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">towym</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">przerwaniem sprzętowym</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-19">\textbf{przerwaniem sprzętowym}</script></span> \English{hardware interrupt}, <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-20-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>b&amp;#x142;&amp;#x119;dem</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-96" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-97" class="mjx-mrow"><span id="MJXc-Node-98" class="mjx-texatom"><span id="MJXc-Node-99" class="mjx-mrow"><span id="MJXc-Node-100" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">b</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ę</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">dem</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">błędem</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-20">\textbf{błędem}</script></span>~\English{fault} i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-21-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>pu&amp;#x142;apk&amp;#x105;</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-101" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-102" class="mjx-mrow"><span id="MJXc-Node-103" class="mjx-texatom"><span id="MJXc-Node-104" class="mjx-mrow"><span id="MJXc-Node-105" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">pu</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">apk</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ą</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">pułapką</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-21">\textbf{pułapką}</script></span> \English{trap}. Dla każdego z tych rodzajów <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-22-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>wyj&amp;#x105;tk&amp;#xF3;w</mtext></mrow></math>" role="presentation" style="font-size: 113%; position: relative;"><span id="MJXc-Node-106" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-107" class="mjx-mrow"><span id="MJXc-Node-108" class="mjx-texatom"><span id="MJXc-Node-109" class="mjx-mrow"><span id="MJXc-Node-110" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">wyj</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ą</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">tk</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.553em;">ó</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">w</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">wyjątków</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-22">\textbf{wyjątków}</script></span> \English{exceptions} podaj co najmniej trzy przykłady zdarzeń, które je wyzwalają. W jakim scenariuszu błąd nie spowoduje błędu czasu wykonania (przerwania działania) programu?</p><p>Wyjątek - mechanizm przepływu sterowania, służący do obsługi zdarzeń, zwłaszcza błędów (które zmieniają przebieg prawidłowego wykonania programu).</p><p>Przerwanie sprzętowe (hardware interrupt) - zdarzenie “rzucone” przez zewnętrzne urządzenia, które potrzebują “obsłużenia”, nie są powiązane z aktualnie wykonywaną instrukcją.</p><p>Przykłady:</p><ul>
<li>np. wciśnięcie przycisku</li>
<li>informacja o zakończeniu operacji I/O (disk controller)</li>
<li>przyjście pakietu (karta sieciowa)</li>
</ul><p>Błąd (ang. fault) - wyjątki spowodowane np. błędą implementacją użytkownika. Niezamierzone, ale możliwe do obsłużenia. Przy obsłużeniu przez handler, procesor może powrócić do ostatniej instrukcji i ją&nbsp;ponownie wykonać.</p><p>Przykłady:</p><ul>
<li>
<p>Page Fault (próba odwołania się do niezmapowanej jednostki pamięci, która jest zarządzana przez MMU). Kontynuacja, ponieważ page foult jest informacją dla procesora, że ma załadować sobie dane z pamięci.</p>
</li>
<li>
<p>Segmentation Fault - naruszenie pamięci (możliwa kontynuacja, jeśli błąd obsłużony - jesli nie to przerwanie). Zazwyczaj wynika on z błędu, ale czasami jest używany świadomie np. alokując mały stost i nie sprawdzając jego przepełnienia, tylko przechwytywanie i obsługa Segmentation Fault.</p>
</li>
<li>
<p>Stack Overflow - przepełnienie pamięci (przerwanie, ale możliwa obsługa błędu)</p>
</li>
</ul><p>Pułapka (ang. trap) - wyjątek będacy efektem ubocznym wywołania jakiegoś polecenia (celowo). Po obsłużeniu następuje kontynuacja od następnej instrukcji.</p><p>Przykłady:</p><ul>
<li>
<p>syscalle (odwołanie do kernela):<br>
stworzenie nowego procesu<br>
komunikacja międzyprocesorowa<br>
sterowanie urządzeniami systemowymi</p>
</li>
<li>
<p>polecenie programistyczne, np. breakpoint</p>
</li>
</ul><h3 id="Zadanie-2"><a class="anchor hidden-xs" href="#Zadanie-2" title="Zadanie-2"><span class="octicon octicon-link"></span></a>Zadanie 2</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Barbara Piasecka</p>
</blockquote><p>Opisz mechanizm <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-234-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>obs&amp;#x142;ugi przerwa&amp;#x144;</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1731" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1732" class="mjx-mrow"><span id="MJXc-Node-1733" class="mjx-texatom"><span id="MJXc-Node-1734" class="mjx-mrow"><span id="MJXc-Node-1735" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">obs</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">ugi przerwa</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.575em;">ń</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">obsługi przerwań</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-234">\textbf{obsługi przerwań}</script></span> bazujący na <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-235-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>wektorze przerwa&amp;#x144;</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1736" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1737" class="mjx-mrow"><span id="MJXc-Node-1738" class="mjx-texatom"><span id="MJXc-Node-1739" class="mjx-mrow"><span id="MJXc-Node-1740" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">wektorze przerwa</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.575em;">ń</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">wektorze przerwań</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-235">\textbf{wektorze przerwań}</script></span> \English{interrupt vector table}. Co robi procesor przed pobraniem pierwszej instrukcji <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-236-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>procedury obs&amp;#x142;ugi przerwania</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1741" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1742" class="mjx-mrow"><span id="MJXc-Node-1743" class="mjx-texatom"><span id="MJXc-Node-1744" class="mjx-mrow"><span id="MJXc-Node-1745" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">procedury obs</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">ugi przerwania</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">procedury obsługi przerwania</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-236">\textbf{procedury obsługi przerwania}</script></span> \English{interrupt handler} i po natrafieniu na instrukcję powrotu z przerwania? Dlaczego procedura obsługi przerwania powinna być wykonywana w <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-237-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>trybie nadzorcy</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1746" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1747" class="mjx-mrow"><span id="MJXc-Node-1748" class="mjx-texatom"><span id="MJXc-Node-1749" class="mjx-mrow"><span id="MJXc-Node-1750" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">trybie nadzorcy</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">trybie nadzorcy</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-237">\textbf{trybie nadzorcy}</script></span> i~używać odrębnego stosu?</p><p>wektor przerwań: tablica, której każdy element zawiera adres instrukcji obsługującej konkretny wyjątek.</p><ol>
<li>Identyfikacja wyjątku (w postaci liczby).</li>
<li>Przerwanie wykonywania bieżącej instrukcji i zapamiętanie kontekstu procesora</li>
<li>Załadowanie nowego kontekstu procesora i rozpoczęcie wykonywania instrukcji obsługi wyjątku</li>
<li>Wczytanie poprzedniego kontekstu i powrót do poprzedniego procesu lub wyświetlenie komunikatu o błędzie i zakończenie działania procesu.</li>
</ol><p>Informacje, które chcemy zapamiętać, to m. in. currentPC, nextPC, poziom zaufania w momencie wystąpienia wyjątku (tryb nadzorcy/użytkownika), poziom wrażliwości(maska przerwań), informacje potrzebne do zdiagnozowania błędu, które mogą być zamazane (np. w przypadku błędu odwołania do pamięci).</p><p>Procedura obsługi przerwania powinna być wykonywana w trybie nadzorcy ze względów bezpieczeństwa: aby użytkownik nie był w stanie sam zmienić swojego poziomu zaufania i nie zyskać uprawnień, których nie powinien mieć.</p><h3 id="Zadanie-3"><a class="anchor hidden-xs" href="#Zadanie-3" title="Zadanie-3"><span class="octicon octicon-link"></span></a>Zadanie 3</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Jakub Mendyk</p>
</blockquote><p>Wzorując się na slajdach do wykładu \Quote{Virtual Memory Systems} (strony 10–21) powtórz proces <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-238-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>translacji adres&amp;#xF3;w</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1751" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1752" class="mjx-mrow"><span id="MJXc-Node-1753" class="mjx-texatom"><span id="MJXc-Node-1754" class="mjx-mrow"><span id="MJXc-Node-1755" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">translacji adres</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.553em;">ó</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">w</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">translacji adresów</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-238">\textbf{translacji adresów}</script></span> i adresowania pamięci podręcznej dla adresów: \verb@0x027c@, \verb@0x03a9@ i \verb@0x0040@ zakładając poniższy stan <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-239-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>TLB</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1756" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1757" class="mjx-mrow"><span id="MJXc-Node-1758" class="mjx-texatom"><span id="MJXc-Node-1759" class="mjx-mrow"><span id="MJXc-Node-1760" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.39em;">TLB</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">TLB</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-239">\textbf{TLB}</script></span>, pamięci podręcznej i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-240-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>tablicy stron</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1761" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1762" class="mjx-mrow"><span id="MJXc-Node-1763" class="mjx-texatom"><span id="MJXc-Node-1764" class="mjx-mrow"><span id="MJXc-Node-1765" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">tablicy stron</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">tablicy stron</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-240">\textbf{tablicy stron}</script></span>.</p><p><img src="https://i.imgur.com/t9NNItL.png" alt=""><br>
<img src="https://i.imgur.com/lBRgLCK.png" alt=""><br>
<img src="https://i.imgur.com/ybhvnHe.png" alt=""><br>
<img src="https://i.imgur.com/TlRmmNQ.png" alt=""></p><p>Słownik pojęć:</p><ul>
<li><strong>Translacja adresów</strong> to proces zamiany adresu wirtualnego na adres fizyczny.</li>
<li><strong>TLB (ang. translation lookaside buffer)</strong> to pamięć podręczna służąca przechowywaniu wpisów w tablicy stron (ang. page table entry).</li>
<li><strong>Tablica stron (ang. page table)</strong> służy identyfikowaniu, które strony są używane przez program, a jeśli tak to czy (i gdzie) znajduje się w pamięci fizycznej (DRAM) lub wirtualnej (dysk).</li>
</ul><p>Odczytaj wartości pól ukryte w adresie writualnym:</p><table>
<thead>
<tr>
<th>VA</th>
<th>TLBT</th>
<th>TLBI</th>
<th>VPN</th>
<th>VPO</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x027c</td>
<td>02</td>
<td>01</td>
<td>09</td>
<td>3C</td>
</tr>
<tr>
<td>0x03a9</td>
<td>03</td>
<td>02</td>
<td>0E</td>
<td>29</td>
</tr>
<tr>
<td>0x0040</td>
<td>00</td>
<td>01</td>
<td>01</td>
<td>00</td>
</tr>
</tbody>
</table><ul>
<li>
<p>0x027c: Szukamy w TLB, w zbiorze 1 (TLBI), wpisu o znaczniku 2 (TLBT). Brak takiego (prawidłowego) wpisu – TLB miss.<br>
Patrzymy na VPN = 9 w tablicy stron. Wpis jest prawidłowy i PPN = 0x17, PPO = VPO = 3C. Zatem PA = 0x5FC, CT = PPN = 0x17, CI = F.<br>
W pamięci podręcznej w piętnastym zbiorze linia nie ma tagu 0x17, dane będą musiałby zostać wczytane z kolejnej warstwy pamięci.</p>
</li>
<li>
<p>0x03a9: Szukamy w TLB, w zbiorze 2 (TLBI), wpisu o znaczniku 3 (TLBT).<br>
VPN wynosi 0x0E, sprawdzamy w tablicy i otrzymujemy PPN = 0x11.</p>
<p>Adres fizyczny = 010001101001, patrzymy na bity 5–2 czyli CI = 1010,<br>
CT to bity 12–6, czyli CT = 010001 = 17, 0x11 czyli pamięć podręczna nie zawiera wpisu o pasującym znaczniku. Dane będą musiałby zostać wczytane z kolejnego poziomu pamięci.</p>
</li>
<li>
<p>0x0040: Szukamy w TLB, w zbiorze 1 (TLBI), wpisu o znaczniku 0 (TLBT). Brak takiego wpisu.<br>
Patrzymy na VPN = 0x1 w tablicy stron. Tam też brak wpisu. Zatem ma miejsce błąd strony.</p>
</li>
</ul><h3 id="Zadanie-4"><span class="fake-id" id="Zadanie-4" style="float: left; margin-top: -60px;"></span><a class="anchor hidden-xs" href="#Zadanie-4" title="Zadanie-4"><span class="octicon octicon-link"></span></a>Zadanie 4</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Karol Kęciński</p>
</blockquote><p>W tym zadaniu będziemy analizowali w jaki sposób system operacyjny musi aktualizować <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-241-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>tablic&amp;#x119; stron</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1766" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1767" class="mjx-mrow"><span id="MJXc-Node-1768" class="mjx-texatom"><span id="MJXc-Node-1769" class="mjx-mrow"><span id="MJXc-Node-1770" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">tablic</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ę</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;"> stron</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">tablicę stron</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-241">\textbf{tablicę stron}</script></span> wraz z kolejnym dostępami do pamięci głównej.  Załóż, że strony są wielkości 4KiB, TLB jest <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-242-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>w~pe&amp;#x142;ni asocjacyjne</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1771" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1772" class="mjx-mrow"><span id="MJXc-Node-1773" class="mjx-texatom"><span id="MJXc-Node-1774" class="mjx-mrow"><span id="MJXc-Node-1775" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">w~pe</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">ni asocjacyjne</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">w~pełni asocjacyjne</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-242">\textbf{w~pełni asocjacyjne}</script></span> z zastępowaniem LRU. Jeśli potrzebujesz <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-243-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>wtoczy&amp;#x107;</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1776" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1777" class="mjx-mrow"><span id="MJXc-Node-1778" class="mjx-texatom"><span id="MJXc-Node-1779" class="mjx-mrow"><span id="MJXc-Node-1780" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">wtoczy</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.465em;">ć</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">wtoczyć</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-243">\textbf{wtoczyć}</script></span> \English{swap-in} stronę z dysku użyj następnego numeru <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-244-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>ramki</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1781" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1782" class="mjx-mrow"><span id="MJXc-Node-1783" class="mjx-texatom"><span id="MJXc-Node-1784" class="mjx-mrow"><span id="MJXc-Node-1785" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.39em;">ramki</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">ramki</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-244">\textbf{ramki}</script></span> \English{page frame} większego od największego istniejącego w tablicy stron. Dla poniższych danych podaj ostateczny stan TLB i tablicy stron po wykonaniu wszystkich dostępów do pamięci. Dla każdej operacji dostępu do pamięci wskaż czy było to trafienie w TLB, trafienie w tablicę stron, czy też <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-245-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>b&amp;#x142;&amp;#x105;d strony</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1786" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1787" class="mjx-mrow"><span id="MJXc-Node-1788" class="mjx-texatom"><span id="MJXc-Node-1789" class="mjx-mrow"><span id="MJXc-Node-1790" class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.501em; padding-bottom: 0.224em;"><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">b</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.332em;">ł</span><span class="mjx-charbox MJXc-TeX-unknown-B" style="padding-bottom: 0.277em; width: 0.509em;">ą</span><span class="mjx-charbox MJXc-TeX-main-B" style="padding-bottom: 0.342em;">d strony</span></span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">błąd strony</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-245">\textbf{błąd strony}</script></span>.</p><table>
<thead>
<tr>
<th>vpn</th>
<th>valid</th>
<th>ppn</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>11</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>brak</td>
</tr>
</tbody>
</table><p>Początkowy stan tablicy stron</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>0</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>7</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>4</td>
<td>3</td>
<td>9</td>
</tr>
</tbody>
</table><p>Początkowy stan TLB</p><p>Ciąg adresów wirtualnych: 4669, 2227, 13916, 34587, 48870, 12608, 49225</p><p>Uwaga: Wszystkie liczby w tym zadaniu podane są w systemie dziesiętnym.</p><p>ROZWIĄZANIE:</p><p>Tablica stron - Struktura danych stosowana do przechowywania aktualnych adresów wirtualnych wraz z odpowiadającymi im adresami fizycznymi.</p><p>TLB jest w pełni asocjacyjne - Każdy adres może być pamiętany w dowolnym bloku pamięci podręcznej.</p><p>LRU = Least Recently Used</p><p>wtoczyć (ang. swap-in) stronę z dysku - Wczytanie przez OS wpisu w tablicy stron, którego nie było w RAMie</p><p>ramka (ang. page frame) - „physical page” (tj. fragment pamięci fizycznej).</p><p>Błąd strony(ang. page fault) - rodzaj wyjątku zgłaszanego przez sprzęt komputerowy, gdy uruchomiony program uzyskuje dostęp do strony pamięci, która nie jest obecnie mapowana przez jednostkę zarządzania pamięcią do wirtualnej przestrzeni adresowej procesu.<br>
(strony nie ma w pamięci głównej DRAM)</p><ul>
<li>Page size: 4KiB = 4096 B = 2^12 B</li>
<li>VPO: log2(2^12) = 12 bitów na offset</li>
<li>Rozmiar strony to 4KiB =&gt; P = 4*2^10 B = 2^12 B =&gt; p=12<br>
(bitów na offset - najmłodsze bity)</li>
<li>Reszta bitów to tag (skoro mamy w pełni asocjacyją to nie ma indeksu)</li>
</ul><p>Zmiany</p><p>Adres: 4669 = 0001 001000111101<br>
VPO: 0010 0011 1101 = 0x23d<br>
VPN, TLBT: 0001 = 0x1 =&gt; tag = 1</p><p>Szukamy w TLB tagu 1, nie ma go w TLB;<br>
Szukamy PPN, sprawdzamy tablicę stron po VPN = 1.<br>
PageFault, bo nie ma w tablicy stron (nie ma w RAMie, jest na dysku), uzupełniamy tablicę; TLB: Tag=11 wypada, bo jego LRU = 0, Tag=1 wpada, jego LRU ustawiamy na max możliwą wartość = 3, resztę dekrementujemy.</p><table>
<thead>
<tr>
<th>vpn</th>
<th>valid</th>
<th>ppn</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>13</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>11</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>brak</td>
</tr>
</tbody>
</table><p>Adres: 2227 = 0000 100010110011<br>
VPO: 1000 1011 0011 = 0x8b3<br>
VPN, TLBT: 0000 = 0 =&gt; tag = 0<br>
Szukamy w TLB tagu 0, nie ma go w TLB;<br>
Szukamy PPN, sprawdzamy tablicę stron po VPN = 0.<br>
Jest w tablicy stron, PPN=5;<br>
TLB: Tag=7 wypada, bo jego LRU=0, Tag=0 wpada, jego LRU ustawiamy na max możliwą wartość (3).</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>2</td>
<td>13</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>0</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>4</td>
<td>1</td>
<td>9</td>
</tr>
</tbody>
</table><p>Adres: 13916 = 11 0110 0101 1100<br>
VPO: 0110 0101 1100<br>
VPN, TLBT: 0011 = 3<br>
Szukamy w TLB tagu 3, jest w TLB =&gt; PPN = 6, ustawiamy mu max wartość LRU, reszcie dekrementujemy.</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>13</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>4</td>
<td>0</td>
<td>9</td>
</tr>
</tbody>
</table><p>Adres: 34587 = 1000 0111 0001 1011<br>
VPO: 0111 0001 1011<br>
VPN, TLBT: 1000 = 8<br>
Szukamy w TLB tagu 8, nie ma go w TLB;<br>
Szukamy w tablicy stron PPN strony o VPN=8,<br>
PageFault, bo nie ma w tablicy stron (nie ma w RAMie, jest na dysku), uzupełniamy tablicę; Tag 4 wypada, bo jesgo LRU=0, wpada tag 8, jego LRU=3, a PPN=14;</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
<td>13</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>8</td>
<td>3</td>
<td>14</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th>vpn</th>
<th>valid</th>
<th>ppn</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>13</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>11</td>
</tr>
<tr>
<td>6</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>14</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>dysk</td>
</tr>
<tr>
<td>10</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>brak</td>
</tr>
</tbody>
</table><p>Adres: 48870 = 1011 1110 1110 0110<br>
VPO: 1110 1110 0110<br>
VPN, TLBT: 1011 = 11<br>
Szukamy w TLB tagu 11, nie ma go w TLB;<br>
Szukamy w tablicy stron PPN strony o VPN= 11, znajdujemy PPN=12, w TLB tag 1 wypada, bo LRU=0, tag 11 wchodzi z LRU=3</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>3</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>8</td>
<td>2</td>
<td>14</td>
</tr>
</tbody>
</table><p>Adres: 12608 = 0011 0001 0100 0000<br>
VPO: 0001 0100 0000<br>
VPN, TLBT: 0011 = 3<br>
Szukamy tagu 3 w TLB, jest tam tenże tag, więc ustawiamy LRU na 3</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>0</td>
<td>8</td>
<td>1</td>
<td>14</td>
</tr>
</tbody>
</table><p>49225 = 1100 000001001001<br>
VPO: 0000 0100 1001<br>
VPN, TLBT: 1100 = 12<br>
Szukamy tagu 12, nie ma go w TLB, więc szukamy w tablicy stron, PPN strony o VPN=12, jest tam, ale jest brak PPN, więc nie możemu pobrać PPN, więc jest Page Fault;</p><table>
<thead>
<tr>
<th>Valid?</th>
<th>Tag</th>
<th>LRU</th>
<th>PPN</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>2</td>
<td>12</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>1</td>
<td>8</td>
<td>1</td>
<td>14</td>
</tr>
</tbody>
</table><h3 id="Zadanie-5"><a class="anchor hidden-xs" href="#Zadanie-5" title="Zadanie-5"><span class="octicon octicon-link"></span></a>Zadanie 5</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Aleksandra Stępniewska</p>
</blockquote><p>Niech system posługuje się 32-bitowymi adresami wirtualnymi, rozmiar strony ma 4KiB, a~rozmiar wpisu tablicy stron zajmuje 4 bajty. Dla procesu, który łącznie używa 1GiB swojej przestrzeni adresowej podaj rozmiar tablicy stron: (a) jednopoziomowej, (b) dwupioziomowej, gdzie katalog tablicy stron (czyli tablica stron pierwszego poziomu) ma 1024 wpisy.  Dla drugiego przypadku – jaki jest maksymalny i minimalny rozmiar tablicy stron?</p><p>(<em>2<sup>10</sup> bajtów - 1 KiB<br>
2<sup>20</sup> bajtów - 1 MiB<br>
2<sup>30</sup> bajtów - 1 GiB</em>)</p><p>-Page size (rozmiar strony): 4KiB = 4096 bytes = 2<sup>12</sup> bytes, p=12<br>
-VPO: log<sub>2</sub>(2<sup>12</sup>) = 12<br>
-skoro adres wirtualny ma 32 bity, a 12 bitów to offset to:<br>
VPN: 32-12 = 20<br>
-każdy wpis zajmuje 4B = 2<sup>2</sup>B<br>
-przestrzeń adresowa ma 1GiB = 2<sup>30</sup>B</p><p>a) <strong>jednopoziomowa:</strong><br>
(2<sup>32</sup> * 2<sup>2</sup>) / 2<sup>12</sup> = 2<sup>22</sup> = 4 * 2<sup>20</sup> =4MiB</p><p>b) <strong>dwupoziomowa:</strong><br>
(<em>tablica stron I pozimu ma 1024 = 2<sup>10</sup> wpisy<br>
zatem zostaje nam 2<sup>20</sup> - 2<sup>10</sup> = 2<sup>10</sup> wpisów na drugi poziom tablicy</em>)</p><ul>
<li>minimalny rozmiar tablicy stron:<br>
poziom I: 2<sup>10</sup> * 2<sup>2</sup> = 2<sup>12</sup> = 4 KiB<br>
policzmy liczbe tablic II poziomu w najlepszym przypadku: 2<sup>30</sup> / (2<sup>12</sup> * 2<sup>10</sup>) = 2<sup>8</sup><br>
poziom II: 2<sup>8</sup> * 2<sup>10</sup> * 2<sup>2</sup> = 2<sup>20</sup>B = 1 MiB<br>
w sumie mamy: 4KiB + 1MiB</li>
<li>maksymalny rozmiar tablicy stron:<br>
poziom I (bez zmian): 4 KiB<br>
(w najgorszym przypadku dane sa “rozsiane”, wiec wykorzystujemy wszytskie 2<sup>10</sup> tablic II poziomu)<br>
poziom II: 2<sup>10</sup> * 2<sup>10</sup> * 2<sup>2</sup> = 2<sup>22</sup> = 4 * 2<sup>20</sup> = 4MiB<br>
w sumie mamy: 4KiB + 4MiB</li>
</ul><table>
<thead>
<tr>
<th>Przypadek</th>
<th>POZIOM I</th>
<th>POZIOM II</th>
<th>POZIOM I + II</th>
</tr>
</thead>
<tbody>
<tr>
<td>Najlepszy</td>
<td>1024</td>
<td>256 * 1024</td>
<td>1 MiB + 4 KiB</td>
</tr>
<tr>
<td>Najgorszy</td>
<td>1024</td>
<td>1024 * 1024</td>
<td>4 MiB + 4 KiB</td>
</tr>
</tbody>
</table><p><a href="https://youtu.be/8kBPRrHOTwg" target="_blank" rel="noopener">https://youtu.be/8kBPRrHOTwg</a><br>
(<em>w linku filmik, w któym można zobaczyć schematycznie rozrysowaną tablice stron dwupoziomowa</em>)</p><h3 id="Zadanie-62pkty"><a class="anchor hidden-xs" href="#Zadanie-62pkty" title="Zadanie-62pkty"><span class="octicon octicon-link"></span></a>Zadanie 6[2pkty]</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Karol Stuła</p>
</blockquote><p>Zdefiniuj format czteropoziomowej tablicy stron zaimplementowany w procesorach architektury \texttt{x86 64}. W jaki sposób tłumaczone są adresy wirtualne na fizyczne? Jaką przewagę ma taka taka tablica nad tablicą jednopoziomową? Opisz dokładnie format pola w tablicach każdego poziomu i wyjaśnij znaczenie bitów pomocniczych.</p><p>\Hint{Wskazówka:}{Przeczytaj rodział 7.9.1 z podręcznika CSAPP3e. Szczegóły można znaleźć w rodziale 4.5 wolumenu 3 dokumentacji procesorów Intel.}</p><p>Proces translacji wygląda następująco:<br>
36-bitowy VPN jest podzielony na cztery 9-bitowe kawałki każdy, które są wykorzystane jako offset do page table. Rejestr C3 zawiera fizyczny adres L1 page table. VPN1 dostarcza offset do L1 PTE(Page table entry), który zawiera początek adresu L2 page table. VPN2 offset dostarcza offset do L2 PTE itd. Na koniec otrzymamy fizyczny adres strony i przepiszemy go do PPN(Physical page number). Wiemy też, że VPO = PPO<br>
<img src="https://i.imgur.com/eks2xe1.png" alt=""><br>
Opisy bitów pomocniczych:<br>
<img src="https://i.imgur.com/fkxnY3A.png" alt=""><br>
<img src="https://i.imgur.com/uuVAtzU.png" alt=""></p><h3 id="Zadanie-72pkty"><a class="anchor hidden-xs" href="#Zadanie-72pkty" title="Zadanie-72pkty"><span class="octicon octicon-link"></span></a>Zadanie 7[2pkty]</h3><blockquote>
<p><small><i class="fa fa-user"></i> Piotr Witkowski</small>  Zadanie rozwiązuje p. Mateusz Zając</p>
</blockquote><p>Na wykładzie przyjęliśmy,&nbsp;że translacja adresów jest wykonywana przed dostępem do pamięci podręcznej. Taki schemat określa się mianem pamięci podręcznej <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-246-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>indeksowanej</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1791" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1792" class="mjx-mrow"><span id="MJXc-Node-1793" class="mjx-texatom"><span id="MJXc-Node-1794" class="mjx-mrow"><span id="MJXc-Node-1795" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">indeksowanej</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">indeksowanej</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-246">\textbf{indeksowanej}</script></span> i <span class="mathjax"><span class="MathJax_Preview" style="color: inherit;"></span><span id="MathJax-Element-247-Frame" class="mjx-chtml MathJax_CHTML" tabindex="0" style="font-size: 113%; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext mathvariant=&quot;bold&quot;>znakowanej adresami fizycznymi</mtext></mrow></math>" role="presentation"><span id="MJXc-Node-1796" class="mjx-math" aria-hidden="true"><span id="MJXc-Node-1797" class="mjx-mrow"><span id="MJXc-Node-1798" class="mjx-texatom"><span id="MJXc-Node-1799" class="mjx-mrow"><span id="MJXc-Node-1800" class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-B" style="padding-top: 0.39em; padding-bottom: 0.556em;">znakowanej adresami fizycznymi</span></span></span></span></span></span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">znakowanej adresami fizycznymi</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-247">\textbf{znakowanej adresami fizycznymi}</script></span> \English{physically-indexed, physically-tagged}. Wyjaśnij jak zrównoleglić dostęp do TLB i pamięci podręcznej, stosując schemat pamięci indeksowanej wirtualnie i znakowanej fizycznie.</p><p>\Hint{Wskazówka:}{Posłuż się slajdem 34 do wykładu \Quote{Virtual Memory: Concepts}, ale wytłumacz to szczegółowo!}</p><p><strong>Rozwiązanie:</strong><br>
W przypadku pamięci podręcznej indeksowanej i znakowanej adresami fizycznymi musimy najpierw dokonać translacji adresu, dopiero po tym wykonujemy dostęp do cache. Po translacji nie mamy już adresów wirtualnych.</p><p>Jednak jeśli mamy sytuację, kiedy różnica między adresami wirtualnymi a fizycznymi występuje tylko w bitach tagu, możemy sprawić, żeby wyszukiwanie indeksu w cache i tłumaczenie tagu odbywało się równolegle.</p><p>Przykład:<br>
|TAG------------| Idx—|Of-|<br>
|o o o o o o o o| o o o o o|<br>
|VPN------------|VPO------|</p><p>Translacja do:</p><p>|TAG---------| Idx—|Of-|<br>
| o o o o o o| o o o o o|<br>
|PPN---------|PPO------|</p><p>VPO jest tłumaczone do PPO bez zmian</p><p>Pobieramy bity adresu odpowiedzialne za indeks w cache i szukamy odpowiedniego indeksu w pamięci cache. W tym samym momencie pobieramy bity z adresu odpowiedzialne za tag i tłumaczymy go według TLB. Równolegle szukamy indeksu w cache i adresu fizycznego w TLB. W momencie znalezienia odpowiedniego indeksu w cache mamy już odpowiedni tag od TLB (TLB z reguły jest szybsze, bo jest mniejsze), więc tego tagu używamy do sprawdzenia poprawności wyszukanego miejsca w cache.</p><p><img src="https://i.imgur.com/JVe1LYO.png" alt=""><br>
<em>Slajd 34 z wykładu “Virtual Memory: Concepts”.</em></p><p><strong>Komentarz do slajdu:</strong> CPU generuje adres wirtualny i przekazuje go do MMU. MMU sprawdza ten adres ze stronami w cache. Jeśli odpowiedniego wpisu tam nie ma, przekazuje żądanie do pamięci. Pamięć zwraca odpowiedni PTE do cache i następuje page hit. MMU konstruuje adres fizyczny. Jeśli jest cache miss, zwraca się do pamięci i pobiera dane. Następuje trafienie, cache wysyła już właściwe dane.</p><h2 id="Konsultacje-60-minut"><a class="anchor hidden-xs" href="#Konsultacje-60-minut" title="Konsultacje-60-minut"><span class="octicon octicon-link"></span></a>Konsultacje (60 minut)</h2><div class="alert alert-info">
<p>W trakcie konsultacji prowadzący udostępnia kartę przeglądarki z bieżącym dokumentem w wideokonferencji. Moderuje dyskusję według własnego uznania, na przykład:</p>
<ul>
<li>kieruje dodatkowe pytania do osób, które dostarczyły rozwiązania,</li>
<li>wymaga uzupełnienia rozwiązania przez autora lub wybraną osobę,</li>
<li>umożliwia studentom zadawanie pytań,</li>
<li>odpowiada na pytania w komentarzach.</li>
</ul>
</div></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#Lista-ćwiczeniowa-nr-9środa" title="Lista ćwiczeniowa nr 9(środa)">Lista ćwiczeniowa nr 9(środa)</a><ul class="nav">
<li><a href="#Deklaracje" title="Deklaracje">Deklaracje</a></li>
<li class=""><a href="#Rozwiązania-30-minut" title="Rozwiązania (30 minut)">Rozwiązania (30 minut)</a><ul class="nav">
<li><a href="#Zadanie-1" title="Zadanie 1">Zadanie 1</a></li>
<li><a href="#Zadanie-2" title="Zadanie 2">Zadanie 2</a></li>
<li><a href="#Zadanie-3" title="Zadanie 3">Zadanie 3</a></li>
<li class=""><a href="#Zadanie-4" title="Zadanie 4">Zadanie 4</a></li>
<li class=""><a href="#Zadanie-5" title="Zadanie 5">Zadanie 5</a></li>
<li class=""><a href="#Zadanie-62pkty" title="Zadanie 6[2pkty]">Zadanie 6[2pkty]</a></li>
<li><a href="#Zadanie-72pkty" title="Zadanie 7[2pkty]">Zadanie 7[2pkty]</a></li>
</ul>
</li>
<li><a href="#Konsultacje-60-minut" title="Konsultacje (60 minut)">Konsultacje (60 minut)</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class=""><a href="#Lista-ćwiczeniowa-nr-9środa" title="Lista ćwiczeniowa nr 9(środa)">Lista ćwiczeniowa nr 9(środa)</a><ul class="nav">
<li><a href="#Deklaracje" title="Deklaracje">Deklaracje</a></li>
<li class=""><a href="#Rozwiązania-30-minut" title="Rozwiązania (30 minut)">Rozwiązania (30 minut)</a><ul class="nav">
<li><a href="#Zadanie-1" title="Zadanie 1">Zadanie 1</a></li>
<li><a href="#Zadanie-2" title="Zadanie 2">Zadanie 2</a></li>
<li><a href="#Zadanie-3" title="Zadanie 3">Zadanie 3</a></li>
<li class=""><a href="#Zadanie-4" title="Zadanie 4">Zadanie 4</a></li>
<li class=""><a href="#Zadanie-5" title="Zadanie 5">Zadanie 5</a></li>
<li class=""><a href="#Zadanie-62pkty" title="Zadanie 6[2pkty]">Zadanie 6[2pkty]</a></li>
<li><a href="#Zadanie-72pkty" title="Zadanie 7[2pkty]">Zadanie 7[2pkty]</a></li>
</ul>
</li>
<li><a href="#Konsultacje-60-minut" title="Konsultacje (60 minut)">Konsultacje (60 minut)</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
